@{
    ViewData["Title"] = "Home Page";
}
<style>
    .chart-container {
        display: flex;
        justify-content: center;
        align-items: center;
    }

</style>

<div class="card-body border-dark" style="height:35rem; background-image:url(/fondocard.jpg);background-size: cover;">
    <div class="row">
        <div class="col-xl-10 offset-xl-1">

            <div class="accordion" id="accordionExample">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                        <button id="boton" class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                            Gráfica
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <div class="col-sm-6 text-center offset-sm-3" style="max-width: 500px">
                                    <h2 class="h2">Top 3 Facturas por Empleado</h2>

                                    <canvas id="myChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div id="img" class="col-12">

            <img src="~/welcome.png" class="w-75" style="margin-top:-20%;margin-bottom:-25%" alt="welcome" />
        </div>
    </div>

</div>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script>
    $(document).ready(function () {
        $('#Home').addClass('active');
        $.ajax({
            url: '/Home/Grafica/',
            success: function (data) {
                var labels = "";
                var datosnum = "";
                var datospor = "";
                $.each(data, function (i, value) {
                    labels += (value.nombreEmpleado) + ',';
                    datosnum += (value.facturasTotales) + ',';
                    datospor += (value.facturasPorcentaje)+',';
                });
                var arraylabels = labels.split(',');
                var arraydatosnum = datosnum.split(',');
                var arraydatospor = datospor.split(',');
                var ctx = document.getElementById('myChart').getContext('2d');
                var myChart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: [arraylabels[0], arraylabels[1], arraylabels[2]],
                        datasets: [{
                            label: 'Cantidad Facturas',
                            data: arraydatosnum,
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.5)',
                                'rgba(54, 162, 235, 0.5)',
                                'rgba(255, 206, 86, 0.5)'
                            ],

                            borderColor: [
                                'rgba(255, 99, 132, 1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)'

                            ],
                            borderWidth: 2
                        },
                            {
                                label: 'Porcentaje Facturas',
                                data: arraydatospor,
                                backgroundColor: [
                                    'rgba(255, 99, 132, 0.5)',
                                    'rgba(54, 162, 235, 0.5)',
                                    'rgba(255, 206, 86, 0.5)'
                                ],
                                borderColor: [
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(255, 206, 86, 1)'

                                ],
                                borderWidth: 2
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });

            }
        });




    });

    function toggleHidden() {
        var img = $("#img");
        if (img.attr('hidden')) {
            img.removeAttr('hidden');
        } else {
            img.attr('hidden', true);
        }
    }

    $("#boton").click(function () {
        toggleHidden();
    });

</script>